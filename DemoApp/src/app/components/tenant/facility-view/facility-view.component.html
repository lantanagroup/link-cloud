<div class="content">
  <p>
    <mat-toolbar class="page-header-bar" color="primary">
      <span *ngIf="facilityConfig">Facility: {{facilityConfig.facilityId}}</span>
      <button mat-raised-button aria-label="Navigate to Tenant Dashboard" matTooltip="Back to Tenant Dashboard" [routerLink]="['/tenant']">
        <mat-icon>arrow_back</mat-icon> Back
      </button>
    </mat-toolbar>
  </p>

  <mat-card *ngIf="facilityConfig">
    <mat-card-content>
      <app-facility-config-form [viewOnly]="true" [item]="facilityConfig"></app-facility-config-form>
      <mat-card-actions align="end">
        <button mat-mini-fab aria-label="Edit facility" matTooltip="Edit Facility" (click)="showFacilityDialog()">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card-content>
  </mat-card>

  <!-- <p>
      {{facilityConfig | json}}
  </p>     -->

  <div class="example-action-buttons">
    <button mat-button (click)="accordion.openAll()">Expand All</button>
    <button mat-button (click)="accordion.closeAll()">Collapse All</button>
  </div>
  <mat-accordion class="example-headers-align" multi>
    <mat-expansion-panel id="censusPanel" (opened)="loadCensusConfig()">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Census Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <app-link-alert [type]="linkNoConfigAlertType" [message]="noCensusConfigAlertMessage" *ngIf="showNoCensusConfigAlert"></app-link-alert>
      <app-census-config-form [item]="censusConfig" [viewOnly]="true"></app-census-config-form>
      <mat-action-row>
        <button mat-mini-fab aria-label="Add census configuration" matTooltip="Add census configuration" (click)="showCensusDialog()" *ngIf="showNoCensusConfigAlert">
          <mat-icon>add</mat-icon>
        </button>
        <button mat-mini-fab aria-label="Edit census configuration" matTooltip="Edit census configuration" (click)="showCensusDialog()" *ngIf="!showNoCensusConfigAlert">
          <mat-icon>edit</mat-icon>
        </button>
      </mat-action-row>
    </mat-expansion-panel>

        <mat-expansion-panel id="dataacqPanel" (opened)="loadDataAcquisitionConfig()">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Data Acquisition Configuration
            </mat-panel-title>
            <mat-panel-description>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <mat-tab-group>
            <mat-tab label="Fhir Query" id="fhirQueryTab">
              <app-link-alert [type]="linkNoConfigAlertType" [message]="noDataAcqFhirQueryConfigAlertMessage" *ngIf="showNoDataAcqFhirQueryConfigAlert"></app-link-alert>
              <app-data-acquisition-fhir-query-config-form [item]="dataAcqFhirQueryConfig" [viewOnly]="true"></app-data-acquisition-fhir-query-config-form>
            </mat-tab>
            <mat-tab label="Fhir List">
              <app-link-alert [type]="linkNoConfigAlertType" [message]="noDataAcqFhirListConfigAlertMessage" *ngIf="showNoDataAcqFhirListConfigAlert"></app-link-alert>
              <app-data-acquisition-fhir-list-config-form [item]="dataAcqFhirListConfig" [viewOnly]="true"></app-data-acquisition-fhir-list-config-form>
            </mat-tab>
            <mat-tab label="Query Plan">
                -- Query Plan Configuration
            </mat-tab>
            <mat-tab label="Authentication">
              <app-link-alert [type]="linkNoConfigAlertType" [message]="noDataAcqFhirListConfigAlertMessage" *ngIf="showNoDataAcqFhirListConfigAlert"></app-link-alert>
              <app-data-acquisition-authentication-config-form [queryAuthConfig]="dataAcqAuthQueryConfig" [queryListAuthConfig]="dataAcqAuthQueryListConfig" [facilityId]="facilityId" [viewOnly]="true"></app-data-acquisition-authentication-config-form>
            </mat-tab>
          </mat-tab-group>

    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Normalization Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>
      -- stuff here
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Measure Evaluation Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>
      -- stuff here
    </mat-expansion-panel>

    <mat-expansion-panel id="reportPanel" (opened)="displayReportDashboard = true" (closed) = "displayReportDashboard = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Report Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <demo-report-dashboard [facilityId]="facilityId" [displayReportDashboard] = "displayReportDashboard" *ngIf="displayReportDashboard"></demo-report-dashboard>
    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Validation Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>

    </mat-expansion-panel>

    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Submission Configuration
        </mat-panel-title>
        <mat-panel-description>
        </mat-panel-description>
      </mat-expansion-panel-header>
      -- stuff here
    </mat-expansion-panel>



  </mat-accordion>


</div>


