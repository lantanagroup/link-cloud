{
  "version": 4,
  "terraform_version": "1.3.7",
  "serial": 372,
  "lineage": "0c94df11-e536-4932-a625-c2605da38cb3",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_client_config",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "client_id": "04b07795-8ddb-461a-bbee-02f9e1bf7b46",
            "id": "Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9ODJmNzE4NDMtMDA2NC00MjM1LWE3OTQtN2Y4ZThlNjBkYmY0O3N1YnNjcmlwdGlvbklkPTcxMTI1MjYyLWUxZDYtNDk2MS05ODAzLThjYjM3NmQwMDg3MTt0ZW5hbnRJZD01OTM0ZGQxYy04ZDE4LTRkZTUtODY5Ni00NTE2YTU3MDdhNTc=",
            "object_id": "82f71843-0064-4235-a794-7f8e8e60dbf4",
            "subscription_id": "71125262-e1d6-4961-9803-8cb376d00871",
            "tenant_id": "5934dd1c-8d18-4de5-8696-4516a5707a57",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "azurerm_container_registry",
      "name": "acr",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "admin_enabled": true,
            "admin_password": "x+Y6Qa0oi8onMP0qGocfRVpCk1HqpkUW",
            "admin_username": "nhsnlink",
            "data_endpoint_enabled": false,
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/nhsnlink-rg/providers/Microsoft.ContainerRegistry/registries/nhsnlink",
            "location": "southcentralus",
            "login_server": "nhsnlink.azurecr.io",
            "name": "nhsnlink",
            "resource_group_name": "nhsnlink-rg",
            "sku": "Standard",
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_container_app",
      "name": "keith-container",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "container_app_environment_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.App/managedEnvironments/keith-apps",
            "custom_domain_verification_id": "764BCEA7930530505C1FBC64CC61F362F77E5693052B897C1258129C5F1E8FD0",
            "dapr": [],
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.App/containerApps/keith-container",
            "identity": [
              {
                "identity_ids": [
                  "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/containerappmi"
                ],
                "principal_id": "",
                "tenant_id": "",
                "type": "UserAssigned"
              }
            ],
            "ingress": [],
            "latest_revision_fqdn": "",
            "latest_revision_name": "keith-container--7h8qfp6",
            "location": "southcentralus",
            "name": "keith-container",
            "outbound_ip_addresses": [
              "4.151.228.112"
            ],
            "registry": [
              {
                "identity": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/containerappmi",
                "password_secret_name": "",
                "server": "nhsnlink.azurecr.io",
                "username": ""
              }
            ],
            "resource_group_name": "keith-rg",
            "revision_mode": "Single",
            "secret": [
              {
                "name": "acr-pass",
                "value": "kcf5al3jhYsohrBgbf/9Y4G4MDwdxDxz"
              },
              {
                "name": "azure-appconfiguration-endpoint",
                "value": "https://aca-configs.azconfig.io"
              }
            ],
            "tags": {},
            "template": [
              {
                "azure_queue_scale_rule": [],
                "container": [
                  {
                    "args": [],
                    "command": [],
                    "cpu": 0.25,
                    "env": [
                      {
                        "name": "Link__Audit__ExternalConfigurationSource",
                        "secret_name": "",
                        "value": "AzureAppConfiguration"
                      },
                      {
                        "name": "ConnectionStrings__AzureAppConfiguration",
                        "secret_name": "azure-appconfiguration-endpoint",
                        "value": ""
                      }
                    ],
                    "ephemeral_storage": "1Gi",
                    "image": "nhsnlink.azurecr.io/link-account:latest",
                    "liveness_probe": [],
                    "memory": "0.5Gi",
                    "name": "keith-container2",
                    "readiness_probe": [],
                    "startup_probe": [],
                    "volume_mounts": []
                  }
                ],
                "custom_scale_rule": [],
                "http_scale_rule": [],
                "init_container": [],
                "max_replicas": 10,
                "min_replicas": 0,
                "revision_suffix": "",
                "tcp_scale_rule": [],
                "volume": []
              }
            ],
            "timeouts": null,
            "workload_profile_name": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_container_app_environment.keith-apps",
            "azurerm_user_assigned_identity.containerapp",
            "data.azurerm_container_registry.acr"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_container_app_environment",
      "name": "keith-apps",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dapr_application_insights_connection_string": "",
            "default_domain": "blackpond-a2a12bc4.southcentralus.azurecontainerapps.io",
            "docker_bridge_cidr": "",
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.App/managedEnvironments/keith-apps",
            "infrastructure_resource_group_name": "",
            "infrastructure_subnet_id": "",
            "internal_load_balancer_enabled": false,
            "location": "southcentralus",
            "log_analytics_workspace_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.OperationalInsights/workspaces/link-log-analytics",
            "name": "keith-apps",
            "platform_reserved_cidr": "",
            "platform_reserved_dns_ip_address": "",
            "resource_group_name": "keith-rg",
            "static_ip_address": "172.202.248.121",
            "tags": {},
            "timeouts": null,
            "workload_profile": [],
            "zone_redundancy_enabled": false
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_log_analytics_workspace.link-log-analytics",
            "azurerm_resource_group.keith-rg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault",
      "name": "keith-LinkVault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "access_policy": [
              {
                "application_id": "",
                "certificate_permissions": [],
                "key_permissions": [
                  "Get",
                  "List",
                  "Create",
                  "Delete",
                  "Purge"
                ],
                "object_id": "82f71843-0064-4235-a794-7f8e8e60dbf4",
                "secret_permissions": [
                  "Get",
                  "List",
                  "Set",
                  "Delete",
                  "Purge"
                ],
                "storage_permissions": [
                  "Get",
                  "List",
                  "Set",
                  "Delete",
                  "Purge"
                ],
                "tenant_id": "5934dd1c-8d18-4de5-8696-4516a5707a57"
              }
            ],
            "contact": [],
            "enable_rbac_authorization": false,
            "enabled_for_deployment": false,
            "enabled_for_disk_encryption": true,
            "enabled_for_template_deployment": false,
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.KeyVault/vaults/keith-LinkVault",
            "location": "southcentralus",
            "name": "keith-LinkVault",
            "network_acls": [
              {
                "bypass": "AzureServices",
                "default_action": "Allow",
                "ip_rules": [],
                "virtual_network_subnet_ids": []
              }
            ],
            "public_network_access_enabled": true,
            "purge_protection_enabled": false,
            "resource_group_name": "keith-rg",
            "sku_name": "standard",
            "soft_delete_retention_days": 7,
            "tags": {
              "environment": "dev"
            },
            "tenant_id": "5934dd1c-8d18-4de5-8696-4516a5707a57",
            "timeouts": null,
            "vault_uri": "https://keith-linkvault.vault.azure.net/"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIyIn0=",
          "dependencies": [
            "data.azurerm_client_config.current"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "keith-secret",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://keith-linkvault.vault.azure.net/secrets/secret-sauce/16be6a91c7b04171bd93565f332c8c3f",
            "key_vault_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.KeyVault/vaults/keith-LinkVault",
            "name": "secret-sauce",
            "not_before_date": null,
            "resource_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.KeyVault/vaults/keith-LinkVault/secrets/secret-sauce/versions/16be6a91c7b04171bd93565f332c8c3f",
            "resource_versionless_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.KeyVault/vaults/keith-LinkVault/secrets/secret-sauce",
            "tags": {},
            "timeouts": null,
            "value": "szechuan",
            "version": "16be6a91c7b04171bd93565f332c8c3f",
            "versionless_id": "https://keith-linkvault.vault.azure.net/secrets/secret-sauce"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_key_vault.keith-LinkVault",
            "data.azurerm_client_config.current"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_log_analytics_workspace",
      "name": "link-log-analytics",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 3,
          "attributes": {
            "allow_resource_only_permissions": true,
            "cmk_for_query_forced": false,
            "daily_quota_gb": -1,
            "data_collection_rule_id": "",
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.OperationalInsights/workspaces/link-log-analytics",
            "identity": [],
            "immediate_data_purge_on_30_days_enabled": false,
            "internet_ingestion_enabled": true,
            "internet_query_enabled": true,
            "local_authentication_disabled": false,
            "location": "southcentralus",
            "name": "link-log-analytics",
            "primary_shared_key": "8aYbDZvBai2mYUOnHQ9QBDRX7AWbu2uHHEEb2Z9QRxC6PoKG4WzZHZ7D5damUwxgv/nxa+SOxW5gL2H6uKYATw==",
            "reservation_capacity_in_gb_per_day": null,
            "resource_group_name": "keith-rg",
            "retention_in_days": 30,
            "secondary_shared_key": "I2TudvuJ7yGxOkwSJux/kq2T6X7XP5RO9JxvxHV3q+apUErpTpPp0QsrHJ6smue9vLkop3Yw8zJZbYHwBt6BOw==",
            "sku": "PerGB2018",
            "tags": {},
            "timeouts": null,
            "workspace_id": "883415d2-3a88-46df-a1a6-63032ea67ab4"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIzIn0=",
          "dependencies": [
            "azurerm_resource_group.keith-rg"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "keith-rg",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg",
            "location": "southcentralus",
            "managed_by": "",
            "name": "keith-rg",
            "tags": {
              "environment": "dev"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "containerapp",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/nhsnlink-rg/providers/Microsoft.ContainerRegistry/registries/nhsnlink/providers/Microsoft.Authorization/roleAssignments/a1e9a0bf-c785-921f-f30e-4cadb4ea1927",
            "name": "a1e9a0bf-c785-921f-f30e-4cadb4ea1927",
            "principal_id": "c4594885-143c-4a87-a332-76c88378b7f0",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/providers/Microsoft.Authorization/roleDefinitions/7f951dda-4ed3-4680-a7ca-43fe172d538d",
            "role_definition_name": "AcrPull",
            "scope": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/nhsnlink-rg/providers/Microsoft.ContainerRegistry/registries/nhsnlink",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMH19",
          "dependencies": [
            "azurerm_user_assigned_identity.containerapp",
            "data.azurerm_container_registry.acr"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_user_assigned_identity",
      "name": "containerapp",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "client_id": "a4abee9f-efdc-4cf0-beb3-15e681362b49",
            "id": "/subscriptions/71125262-e1d6-4961-9803-8cb376d00871/resourceGroups/keith-rg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/containerappmi",
            "location": "southcentralus",
            "name": "containerappmi",
            "principal_id": "c4594885-143c-4a87-a332-76c88378b7f0",
            "resource_group_name": "keith-rg",
            "tags": {},
            "tenant_id": "5934dd1c-8d18-4de5-8696-4516a5707a57",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    }
  ],
  "check_results": null
}
